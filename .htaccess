RewriteEngine On

# Check if the requested URL is not an existing file or directory
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d


# Check if the requested URL without extension exists as an  file
RewriteCond %{DOCUMENT_ROOT}/$1.html -f
RewriteRule ^(.*)$ $1.html [L,QSA]

# Check if the requested URL without extension exists as an .shtml file
RewriteCond %{DOCUMENT_ROOT}/$1.shtml -f
RewriteRule ^(.*)$ $1.shtml [L,QSA]

RewriteCond %{HTTP_HOST} ^www\.globalrmetals\.com$ [NC]
RewriteRule ^(.*)$ https://globalrmetals.com/$1 [L,R=301]

ErrorDocument 500 /500
ErrorDocument 404 /404




# Rewrite rule to handle custom error pages without extension


Header always set Strict-Transport-Security "max-age=31536000; includeSubDomains"



<IfModule mod_headers.c>
    # Ensure Apache handles the Range header
    Header set Accept-Ranges bytes
    # Add headers to support chunked playback
    <FilesMatch "\.(mp4)$">
        Header set Content-Type "video/mp4"
        Header set Cache-Control "no-store, no-cache, must-revalidate, max-age=0"
        Header set Pragma "no-cache"
    </FilesMatch>
</IfModule>

<IfModule mod_rewrite.c>
    RewriteEngine On
    # Enable serving partial content
    RewriteCond %{HTTP:Range} !^$
    RewriteRule .* - [E=HTTP_RANGE:%{HTTP:Range}]
</IfModule>

SetOutputFilter DEFLATE
SetEnvIfNoCase Request_URI .(mp4|ogv|webm)$ no-gzip dont-vary